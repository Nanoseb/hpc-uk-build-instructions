Performance Results for NEMO 4.2.0 (GCC11) on ARCHER2 from 2023-07-07
=====================================================================

The performance results were generated by running the [NEMO GYRE_PISCES benchmark](https://sites.nemo-ocean.io/user-guide/cfgs.html#gyre-pisces).

NEMO was run in detached mode with XIOS (trunk r2528) as a separate executable.
The benchmark jobs requested two nodes with 2 XIOS servers and 48 ocean processes
per node. The XIOS servers each ran within their own NUMA region and the ocean
processes were distributed over the remaining six NUMA regions such that there was
a free CPU between each process.

Various NEMO parameters were set in the `namelist_cfg` file, see the table below.

Parameter | Description                        | Value 
--------- | ---------------------------------- | ----- 
nn_it000  | first time step                    | 1 
nn_itend  | last time step                     | 43200
nn_stock  | frequency of restart file creation | -1
nn_GYRE   | GYRE resolution (degree)           | 1
rn_Dt     | time step size in seconds          | 7200
jpni      | grid extend in x direction         | 8
jpnj      | grid extend in y direction         | 12

Both NEMO and XIOS were built using GCC 11, see [build_nemo_4.2.0_archer2_gcc11.md](build_nemo_4.2.0_archer2_gcc11.md).


The runtime and energy results were obtain via the `sacct` command.

```bash
sacct -j <job id> --format=JobID,JobName%20,NNodes,ReqCPUFreq,Elapsed,ConsumedEnergyRaw
```

The actual numbers were taken from the `myscript_wrapper.sh` task indicated in the `sacct` output.


### Runtime (s)

Comms | Turbo | Cnt | Min | Max | Avg
----- | ----- | --- | --- | --- | ---
  OFI | &cross; | 3 | 377 | 421 | 397
  OFI | &check; | 3 | 301 | 310 | 305
  UCX | &cross; | 3 | 362 | 394 | 380
  UCX | &check; | 3 | 333 | 405 | 373


### Energy [J]

Comms | Turbo | Cnt |     Min |     Max |     Avg
----- | ----- | --- | ------- | ------- | -------
OFI   | &cross; | 3 | 207,146 | 224,044 | 216,217
OFI   | &check; | 3 | 212,531 | 233,470 | 225,253
UCX   | &cross; | 3 | 199,209 | 214,667 | 204,754
UCX   | &check; | 3 | 230,991 | 296,633 | 271,715 
